{"version":3,"sources":["components/PrivateRoute.js","components/PublicRoute.js","components/AuthNav/AuthNav.js","components/Navigation/Navigation.js","components/UserMenu/defaultAvatar.png","components/UserMenu/UserMenu.js","components/Loader/Loader.js","App.js","redux/contacts/contacts-reducer.js","redux/store.js","index.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","redux/contacts/contacts-actions.js","services/APIService.js","redux/contacts/contacts-operations.js","components/AuthNav/AuthNav.module.css","components/UserMenu/UserMenu.module.css","components/Navigation/Navigation.module.css","redux/contacts/contacts-selectors.js","App.module.css"],"names":["PrivateRoute","children","redirectTo","routeProps","isLoggedIn","useSelector","authSelectors","getIsLoggedIn","to","PublicRoute","restricted","shouldRedirect","AuthNav","className","s","wrapper","exact","link","activeClassName","activeLink","Navigation","UserMenu","dispatch","useDispatch","name","getUsername","email","getUsermail","avatar","defaultAvatar","container","mail","href","src","alt","width","Button","type","onClick","authOperations","logOut","resetState","variant","sx","mt","mb","Loader","color","height","timeout","HomeView","lazy","RegisterView","LoginView","ContactsView","App","fallback","path","items","createReducer","readContacts","fulfilled","_","payload","addContacts","state","phonebookRecords","newRecord","normalizedNewName","toLowerCase","some","isUnique","alert","deleteContacts","filter","contact","id","filterItems","combineReducers","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","contacts","contactsReducer","auth","persistReducer","authReducer","devTools","process","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","post","data","console","log","response","logIn","fetchCurrentUser","thunkAPI","getState","persistedToken","rejectWithValue","get","operations","user","authSlice","createSlice","initialState","extraReducers","action","createAction","url","getToken","JSON","parse","localStorage","getItem","api","fetch","then","res","json","method","body","stringify","contactId","result","module","exports","getItems","getFilter","getVisible","createSelector","normalizedFilter","includes"],"mappings":"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","file":"static/js/main.ef1e61a2.chunk.js","sourcesContent":["import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './AuthNav.module.css';\r\n\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <NavLink\r\n        to=\"/register\"\r\n        exact\r\n        className={s.link}\r\n        activeClassName={s.activeLink}\r\n      >\r\n        Registration\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        exact\r\n        className={s.link}\r\n        activeClassName={s.activeLink}\r\n      >\r\n        Login\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { authSelectors } from '../../redux/auth';\r\nimport s from './Navigation.module.css';\r\n\r\n\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav>\r\n      <NavLink to=\"/\" exact className={s.link} activeClassName={s.activeLink}>\r\n        Home Page\r\n      </NavLink>\r\n\r\n      {isLoggedIn && (\r\n        <>\r\n          <NavLink\r\n            to=\"/contacts\"\r\n            exact\r\n            className={s.link}\r\n            activeClassName={s.activeLink}\r\n          >\r\n            Контакты\r\n          </NavLink>\r\n        </>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.579de3d8.png\";","import { useDispatch, useSelector } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../redux/auth';\r\nimport { resetState } from '../../redux/contacts/contacts-actions';\r\nimport Button from '@mui/material/Button';\r\nimport defaultAvatar from './defaultAvatar.png';\r\nimport s from './UserMenu.module.css';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n  const email = useSelector(authSelectors.getUsermail);\r\n  const avatar = defaultAvatar;\r\n\r\n  return (\r\n    <div className={s.container}>\r\n      <div className={s.mail}>\r\n        <a href={`mailto:${email}`}> {email}</a>\r\n      </div>\r\n      <div className={s.wrapper}>\r\n        <img src={avatar} alt=\"\" width=\"64\" className={s.avatar} />\r\n        <span className={s.name}>WELLCOME HOME, {name}</span>\r\n\r\n        <Button\r\n          type=\"button\"\r\n          onClick={() => { dispatch(authOperations.logOut()); dispatch(resetState())}}\r\n          variant=\"contained\"\r\n          sx={{ width: 300, mt: 3, mb: 2 }}\r\n        >\r\n          EXIT\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport SpinLoader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\n// export default class App extends Component {\r\n  const Loader =()=>{\r\n    return (\r\n      <SpinLoader\r\n        type=\"Watch\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={500} //0.5 secs\r\n      />\r\n    );\r\n}\r\nexport default Loader;\r\n","import { Suspense, lazy } from 'react';\nimport { useSelector} from 'react-redux';\nimport { Switch} from 'react-router-dom';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\n\nimport AuthNav from './components/AuthNav';\nimport Navigation from './components/Navigation';\nimport UserMenu from './components/UserMenu';\nimport Loader from './components/Loader';\nimport { authSelectors } from './redux/auth';\nimport s from './App.module.css';\n\nconst HomeView = lazy(() => import('./views/HomeView'));\nconst RegisterView = lazy(() => import('./views/RegisterView'));\nconst LoginView = lazy(() => import('./views/LoginView'));\nconst ContactsView = lazy(() => import('./views/ContactsView'));\n\n\nconst App = () => {\n  \n    return (\n      <div className={s.container}>\n        <Navigation />\n        {useSelector(authSelectors.getIsLoggedIn) ? <UserMenu /> : <AuthNav />}\n        <Switch>\n          <Suspense fallback={<Loader/>}>\n            <PublicRoute exact path=\"/\">\n            <HomeView />\n          </PublicRoute>\n          <PublicRoute exact path=\"/register\" restricted>\n            <RegisterView />\n          </PublicRoute>\n          <PublicRoute exact path=\"/login\" redirectTo=\"/\" restricted>\n            <LoginView />\n          </PublicRoute>\n          <PrivateRoute path=\"/contacts\" redirectTo=\"/\">\n            <ContactsView />\n            </PrivateRoute>\n         </Suspense>\n        </Switch>\n      </div>\n    );\n\n}\nexport default App;\n","import {\r\n  readContacts,\r\n  addContacts,\r\n  deleteContacts,\r\n} from './contacts-operations';\r\nimport { filterItems, resetState} from './contacts-actions';\r\n\r\nimport { combineReducers, createReducer } from '@reduxjs/toolkit';\r\n\r\nconst items = createReducer([], {\r\n  [readContacts.fulfilled]: (_, { payload }) => payload,\r\n  [addContacts.fulfilled]: (state, { payload }) =>\r\n    isUnique(state, payload)\r\n      ? [...state, payload]\r\n      : alert('THIS NAME IS ALREADY PRESENT IN A PHONEBOOK'),\r\n  [deleteContacts.fulfilled]: (state, { payload }) =>\r\n    state.filter(contact => contact.id !== payload),\r\n  [resetState]: state => state =[],\r\n});\r\n\r\n\r\nconst filter = createReducer('', {\r\n  [filterItems]: (_, { payload }) => payload,\r\n  [resetState]:(state)=>state='',\r\n});\r\n\r\n\r\nexport default combineReducers({ items, filter });\r\n\r\nfunction isUnique (phonebookRecords, newRecord) {\r\n  const normalizedNewName = newRecord.name.toLowerCase();\r\n  return !phonebookRecords.some(\r\n    ({ name }) => name.toLowerCase() === normalizedNewName,\r\n  );\r\n}\r\n\r\n\r\n\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { contactsReducer } from './contacts';\r\nimport { authReducer} from './auth';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    contacts: contactsReducer,\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n  },\r\n  devTools: process.env.NODE_ENV === 'development',\r\n  middleware: getDefaultMiddleware =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n});\r\n    \r\n\r\nconst persistor = persistStore(store);\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { store, persistor };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport store from './redux/store';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store.store}>\n      <PersistGate loading={null} persistor={store.persistor}>\n      <BrowserRouter>\n      <App />\n      </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch(error){console.log(error.response);}\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async credentials => {\r\n\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error){console.log(error.response);}\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) { console.log(error.response);\r\n  }\r\n});\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {console.log(error.response);\r\n    }\r\n  },\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nconst getUsermail = state => state.auth.user.email;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getUsermail,\r\n};\r\nexport default authSelectors;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state, action) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\n\r\n export const filterItems = createAction('contacts/changeFilter');\r\nexport const resetState = createAction('contacts/reset');\r\n","const url = 'https://connections-api.herokuapp.com/contacts';\r\n\r\nconst getToken =()=> JSON.parse(localStorage.getItem('persist:auth')).token;\r\n\r\nconst readContacts = () => {\r\n  return fetch(url, {\r\n    headers: {\r\n      Authorization: [JSON.parse(getToken())]\r\n    },\r\n  }).then(res => res.json());\r\n}\r\nconst addContacts = (contact) => {\r\n\r\n    return fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: [JSON.parse(getToken())],\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(contact),\r\n    });\r\n  }\r\n\r\n    const deleteContacts = contactId => {\r\n        return fetch(url + '/' + contactId, {\r\n          method: 'delete',\r\n          headers: {\r\n            Authorization: [JSON.parse(getToken())],\r\n          },\r\n        }).then(res => res.json());\r\n\r\n    }\r\n\r\n    // eslint-disable-next-line import/no-anonymous-default-export\r\n    const api = { readContacts, addContacts, deleteContacts };\r\nexport default api;\r\n    \r\n","import api from '../../services/APIService';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\n\r\nexport const readContacts = createAsyncThunk(\r\n  'contacts/readContacts',\r\n    async (_, { rejectWithValue }) => {\r\n        try {\r\n          const contacts = await api.readContacts();\r\n            return contacts;\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n  },\r\n);\r\nexport const addContacts = createAsyncThunk(\r\n  'contacts/addContacts',\r\n  async (contact, { rejectWithValue }) => {\r\n        try {\r\n          const result = await api.addContacts(contact).then(res => res.json());\r\n          return result;\r\n        } catch (error) {\r\n            return rejectWithValue(error.response);\r\n        }\r\n  },\r\n);\r\n\r\n    \r\nexport const deleteContacts = createAsyncThunk(\r\n  'contacts/deleteContacts',\r\n    async (contactId, { rejectWithValue }) => {\r\n        try {\r\n            await api.deleteContacts(contactId);\r\n            return contactId;\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n  },\r\n);\r\n  \r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AuthNav_wrapper__3Q4hq\",\"link\":\"AuthNav_link__3AGr8\",\"activeLink\":\"AuthNav_activeLink__3rBpN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__3LSpG\",\"mail\":\"UserMenu_mail__2sC7W\",\"wrapper\":\"UserMenu_wrapper__2wL_m\",\"avatar\":\"UserMenu_avatar__LCDwa\",\"name\":\"UserMenu_name__3Gl4-\",\"button\":\"UserMenu_button__ZsgCu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__3ElHq\",\"activeLink\":\"Navigation_activeLink__1SyI5\"};","import { createSelector } from 'reselect';\r\n\r\nconst getItems = state => state.contacts.items;\r\nconst getFilter = state => state.contacts.filter;\r\n\r\nconst getVisible = createSelector(\r\n    [getItems, getFilter],\r\n    (items, filter) => {\r\n        const normalizedFilter = filter.toLowerCase();\r\n        return items.filter(({ name }) =>\r\n            name.toLowerCase().includes(normalizedFilter),\r\n        );\r\n        \r\n    }\r\n);\r\n\r\n\r\n\r\n\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getItems, getFilter,getVisible };","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3CML9\",\"App-logo\":\"App_App-logo__3V_3k\",\"App-logo-spin\":\"App_App-logo-spin__6EU5V\",\"App-header\":\"App_App-header__1IClJ\",\"App-link\":\"App_App-link__24xqe\",\"headline\":\"App_headline__3p2R5\",\"container\":\"App_container__CInU0\"};"],"sourceRoot":""}